# Compactor

Compactor 是 Thanos 的原生组件之一，仅在使用对象存储的场景下使用。它的主要作用对数据块的压缩与降采样。


### 数据块压缩

Thanos Compact的主要目的是优化对象存储中的数据布局，减少存储空间占用并提高查询性能。当Prometheus服务器的块数据被上传到对象存储后，它们通常以原始格式存储。这些原始块数据可能会占用大量的磁盘空间。

Thanos Compact组件通过合并和压缩相邻的数据块来减少存储空间的使用量。它会扫描对象存储中的数据，并将相邻的块合并成更大的块。这样可以减少元数据的开销，并且减少了查询时需要加载的块数量，从而提高了查询性能。

通过运行Thanos Compact组件，您可以对对象存储中的数据进行紧凑处理，优化存储空间使用，并获得更高的查询性能。

### 数据块降采样

Thanos Compactor负责对长期存储中的数据进行降采样操作，以减少存储空间占用并加快查询速度。

当数据被上传到对象存储中后，原始数据通常包含了高分辨率的时间序列数据。而随着时间的推移，对历史数据的高分辨率查询需求可能会减少。Thanos Compactor会定期运行，并根据预定义的策略对存储中的数据进行降采样。

降采样的过程涉及将高分辨率的时间序列数据聚合为较低分辨率的数据点。这样可以减少存储空间的使用，同时对于大部分查询仍然提供足够的精度。

通过使用Thanos Compactor的降采样功能，您可以在长期存储中实现数据的降采样，从而降低存储需求并提高查询性能。


更多 Compactor 使用说明可参考 https://thanos.io/tip/components/compact.md/